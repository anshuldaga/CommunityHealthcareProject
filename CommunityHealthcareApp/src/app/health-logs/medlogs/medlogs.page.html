<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
            <ion-back-button defaultHref = "/home" color = "danger"></ion-back-button>
        </ion-buttons>
        <ion-title>
            <p id = "first">Health Log</p> 
           </ion-title>
  </ion-toolbar>
</ion-header>


<ion-content fullscreen class="ion-padding">
    <ion-text>
        <h1>Medication Logs</h1>
    </ion-text>
      
        <ion-row>
            <ion-col size="4" text-center>
                <ion-button  color="primary" (click)="today()">      
                  current     
                </ion-button>      
              </ion-col>
              <ion-col size="4" text-center>
                <ion-button color="secondary" (click)="onEdit()">      
                  edit     
                </ion-button>      
              </ion-col>
      </ion-row>

      <ng-template #temp let-viewDate="viewDate" let-log="log"> 
        <div class="custom-day-header"> 
          {{ viewDate.dayHeader.substr(0,1)}} 

          <div *ngIf="log == 'medlog1'">
            <div *ngIf="isChecked(viewDate.date, 'isMed1')">
                <ion-checkbox checked="true" (click)="deleteEvent(viewDate.date, 'isMed1')"></ion-checkbox>
            </div>
            <div *ngIf="!isChecked(viewDate.date , 'isMed1')">
              <ion-checkbox checked="false" (click)="addEvent(viewDate.date, 'isMed1')"></ion-checkbox>
            </div>
        </div>

        <div *ngIf="log == 'medlog2'">
          <div *ngIf="isChecked(viewDate.date , 'isMed2')">
              <ion-checkbox checked="true" (click)="deleteEvent(viewDate.date, 'isMed2')"></ion-checkbox>
          </div>
          <div *ngIf="!isChecked(viewDate.date , 'isMed2')">
            <ion-checkbox checked="false" (click)="addEvent(viewDate.date, 'isMed2')"></ion-checkbox>
          </div>
      </div>

      <div *ngIf="log == 'medlog3'">
        <div *ngIf="isChecked(viewDate.date , 'isMed3')">
            <ion-checkbox checked="true" (click)="deleteEvent(viewDate.date, 'isMed3')"></ion-checkbox>
        </div>
        <div *ngIf="!isChecked(viewDate.date , 'isMed3')">
          <ion-checkbox checked="false" (click)="addEvent(viewDate.date, 'isMed3')"></ion-checkbox>
        </div>
    </div>

        </div> 
    </ng-template> 

      <ng-template #template let-displayEvent="displayEvent">
          <div class="calendar-event-inner">{{displayEvent.event.isMed1}}</div>
          <div class="calendar-event-inner">{{displayEvent.event.isMed2}}</div>
          <div class="calendar-event-inner">{{displayEvent.event.isMed3}}</div>
      </ng-template>
        <calendar [eventSource]="eventSource"
        [weekviewHeaderTemplate]="temp"
        [weekviewAllDayEventTemplate]="template"
        [calendarMode]="calendar.mode"
        [currentDate]="calendar.currentDate"
        (onCurrentDateChanged)="onCurrentDateChanged($event)"
        (onRangeChanged)="reloadSource(startTime, endTime)"
        (onEventSelected)="onEventSelected($event)"
        (onTitleChanged)="onViewTitleChanged($event)"
        (onTimeSelected)="onTimeSelected($event) "
        showEventDetail=false
        formatWeekViewDayHeader="EEE"
        allDayLabel= "{{alldaylabel}}"
        startHour="0"
        endHour = "0"
        startingDayWeek="1">
        </calendar>

  </ion-content>
